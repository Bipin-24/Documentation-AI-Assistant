<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>title: MongoDB</title><link rel="Prev" href="zeenea-connector-mongodb.51.1.html" title="Previous" /><link rel="Next" href="zeenea-connector-mysql.52.1.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/all.min.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/zeenea-connector-mongodb.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pHzRDyCbyT6U7wepS7Lih2w" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Connectors/zeenea-connector-mongodb.51.2.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="zeenea-connectors-list.01.1.html">Connectors</a> : <span class="WebWorks_Breadcrumb_Text">title: MongoDB  </span></div><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="far"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><div id="social_links"><!-- Twitter --><!--         --><a id="social_twitter" class="ww_social ww_social_twitter" title="Twitter" target="_blank" href="#"><i class="fab"></i></a><!-- FaceBook Like --><!--               --><a id="social_facebook_like" class="ww_social ww_social_facebook" title="Facebook" target="_blank" href="#"><i class="fab"></i></a><!-- LinkedIn Share --><!--                --><a id="social_linkedin" class="ww_social ww_social_linkedin" title="LinkedIn" target="_blank" href="#"><i class="fab"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><div class="ww_skin_was_this_helpful_container"><div class="ww_skin_was_this_helpful_message">Was this helpful?</div><div class="ww_skin_was_this_helpful_buttons_container"><div id="helpful_thumbs_up" class="ww_skin_was_this_helpful_button" title="Helpful"><i class="far"></i></div><div id="helpful_thumbs_down" class="ww_skin_was_this_helpful_button" title="Unhelpful"><i class="far"></i></div></div></div></header><div id="page_content_container"><div id="page_content"><div id="wwp100018" class="Title_1">title: MongoDB  </div><div class="WebWorks_MiniTOC"><div class="WebWorks_MiniTOC_Heading">&nbsp;</div><dl class="WebWorks_MiniTOC_List"><dd><div class="WebWorks_MiniTOC_Entry"><a class="WebWorks_MiniTOC_Link" href="../Connectors/zeenea-connector-mongodb.51.2.html#wwp100024">Adding a MongoDB Connection</a></div></dd></dl></div><div id="wwp100024" class="Heading_1">Adding a MongoDB Connection</div><div id="wwp100030" class="Heading_2">Prerequisites</div><ul id="wwl100063" class="UList"><li id="wwli100051" class="UList_Item" value="1"><div id="wwp100045" class="UList_Paragraph">To connect to a MongoDB cluster, a user with sufficient <span class="Link"><a href="../Connectors/zeenea-connector-mongodb.51.2.html#wwp100285" title="title: MongoDB">permissions</a></span> is required.</div></li><li id="wwli100060" class="UList_Item" value="2"><div id="wwp100054" class="UList_Paragraph">The traffic flows from Zeenea towards the MongoDB cluster must be open.</div></li></ul><div id="wwp100075" class="Paragraph">:::note A link to the configuration template can be found here: <span class="Link"><a href="../Connectors/zeenea-connectors-list.01.1.html#" title="Zeenea Connector Downloads">Zeenea Connector Downloads</a></span>. :::</div><div id="wwp100081" class="Heading_2">Supported Versions</div><div id="wwp100096" class="Paragraph">Since scanner version 26.9, the MongoDB plugin can be downloaded here: <span class="Link"><a href="../Connectors/zeenea-connectors-list.01.1.html#" title="Zeenea Connector Downloads">Zeenea Connector Downloads</a></span></div><div id="wwp100102" class="Heading_2">Installing the Plugin</div><div id="wwp100108" class="Paragraph">Since scanner version 26.9, the MongoDB plugin can be downloaded here: Connectors: download links</div><div id="wwp100123" class="Paragraph">For more information on how to install a plugin, please refer to the following article: <span class="Link"><a href="../Connectors/zeenea-connectors-install-as-plugin.02.1.html#" title="Installing and Configuring Connectors as a Plugin">Installing and Configuring Connectors as a Plugin</a></span>.</div><div id="wwp100129" class="Heading_2">Declaring the Connection</div><div id="wwp100138" class="Paragraph">Creating and configuring connectors is done through a dedicated configuration file located in the <span class="Code">/connections</span> folder of the relevant scanner. The scanner frequently checks for any change and resynchronises automatically.</div><div id="wwp100144" class="Paragraph">Read more: Managing Connections</div><div id="wwp100150" class="Paragraph">In order to establish a connection to a MongoDB cluster, specifying the following parameters in the dedicated file is required:</div><div id="wwp100156" class="HTML"><table>
  <tr>
    <th>Parameter</th>
    <th>Expected value</th>
  </tr>
  <tr>
    <td>`name`</td>
    <td>The name that will be displayed to catalog users for this connection</td>
  </tr>
  <tr>
    <td>`code`</td>
    <td>The unique identifier of the connection on the Zeenea platform. Once registered on the platform, this code must not be modified or the connection will be considered as new and the old one removed from the scanner.</td>
  </tr>
  <tr>
    <td>`connector_id`</td>
    <td>The type of connector to be used for the connection. Here, the value must be `Mongodb` and this value must not be modified.</td>
  </tr>
  <tr>
    <td>`connection.url`</td>
    <td>MongoDB connection address.<br /><br />Example: `mongodb://mongodb.zeenea.local:27017/admin?authSource=admin`</td>
  </tr>
  <tr>
    <td>`connection.username`</td>
    <td>Username</td>
  </tr>
  <tr>
    <td>`connection.password`</td>
    <td>User password</td>
  </tr>
  <tr>
    <td>`tls.trust_store.type   `</td>
    <td>One of two values: `pkcs12` or `jks`</td>
  </tr>
  <tr>
    <td>`tls.trust_store.path`</td>
    <td>Path to the trust store containing the trust certificates. It must contain the certificate chain that generated the MongoDB Cluster Nodes certificates.</td>
  </tr>
  <tr>
    <td>`tls.trust_store.password   `</td>
    <td>Password of the Trust Store containing the Trust Certificates</td>
  </tr>
  <tr>
    <td>`schema_analysis.strategy`</td>
    <td>One of two values: `Map Reduce` or `Sample`</td>
  </tr>
  <tr>
    <td>`schema_analysis.sample.size`</td>
    <td>In case mode `Sample` is selected, this will limit the size of the sample. Default value is `1000`.</td>
  </tr>
  <tr>
    <td>`inventory.databases`</td>
    <td>(Optional) List of databases to be inventoried separated by spaces</td>
  </tr>
</table></div><div id="wwp100168" class="Heading_2">Data Extraction</div><div id="wwp100174" class="Paragraph">The MongoDB connector allows you to select between two modes for metadata extraction. Choosing one of these modes is necessary, as MongoDB does not use schemas. </div><div id="wwp100180" class="Heading_3">MapReduce Mode</div><div id="wwp100186" class="Paragraph">This mode uses the MongoDB MapReduce feature, which lists all fields (even those that are only used once). It is very resource consuming, and may result in a timeout failure if it takes too long. </div><div id="wwp100192" class="Paragraph">The MapReduce feature runs JavaScript on the database; this code is coming in from the agent. The code is constant, and is not subjected to any action or data from the user. </div><div id="wwp100201" class="Paragraph">The script engine mustn't be disabled (option <span class="Code">--noscripting</span>).</div><div id="wwp100207" class="Paragraph">No actual data is extracted from the database.</div><div id="wwp100213" class="Heading_3">Sample Mode</div><div id="wwp100219" class="Paragraph">This mode uses a sampling request. Because the request is probabilistic, rare fields can't be detected. </div><div id="wwp100225" class="Paragraph">The sample size is defined in the connector. </div><div id="wwp100234" class="Paragraph">There is no risk of a timeout failure, and no JavaScript code is ran on the MongoDB server; thus, this mode is compatible with the <span class="Code">--noscripting</span> option. </div><div id="wwp100240" class="Paragraph">Some data is read by the agent but it is never saved or sent, and is "forgotten" as soon as the information has been extracted.</div><div id="wwp100246" class="Heading_2">Choosing the Right Mode</div><div id="wwp100252" class="Paragraph">The MapReduce mode was built first, however, after being faced with speed issues and timeout failures on large collections, the Sample mode was introduced. </div><div id="wwp100258" class="Paragraph">The MapReduce mode is most useful when the collection size is reasonably large and when it contains rare fields. </div><div id="wwp100264" class="Paragraph">Unfortunately, we do not know which resources are consumed, because this mode is dependent on multiple variables: server performance, collection size, number of fields, etc... </div><div id="wwp100270" class="Paragraph">The Sample mode is usually recommended, however it may not detect rare fields. More accurately, a rare field may appear temporarily when a schema is being updated, and disappear at the next update. This has not been observed or reported, but, statistically, it is a possibility. </div><div id="wwp100279" class="Paragraph"><span class="Bold">We recommend trying the Sample mode first, as it is faster and lighter. If it is not applicable to your configuration, switching to the MapReduce mode remains possible.</span></div><div id="wwp100285" class="Heading_2">User Permissions</div><div id="wwp100291" class="Paragraph">In order to collect metadata, the running user must be able to list and read databases that need to be cataloged.</div><div id="wwp100300" class="Paragraph">In case of limited rights to list databases <span class="Bold">before version 4</span>, it is possible to use the inventory.databases parameter to select only the desired databases.</div><div id="wwp100306" class="Heading_3">Integrated Roles</div><div id="wwp100312" class="Paragraph">The readAnyDatabase integrated role is enough to catalog the entire system. </div><div id="wwp100318" class="Paragraph">The read integrated role, when assigned to a database, allows the user to catalog that base's collections.</div><div id="wwp100324" class="Paragraph">In the following example, the Zeenea account can catalog the sales and stock bases:</div><div id="wwp100330" class="Code_Fence">db.grantRolesToUser('zeenea', [<br />    { role: 'read', db: 'sales' },<br />    { role: 'read', db: 'stock' }<br />]);</div><div id="wwp100336" class="Heading_3">Zeenea Role</div><div id="wwp100342" class="Paragraph">You may regroup permissions into one specific role for Zeenea:</div><div id="wwp100348" class="Code_Fence">db.createRole({<br />    role: "zeeneaRole",<br />    privileges: [],<br />    roles: [<br />        { role: 'read', db: 'sales' },<br />        { role: 'read', db: 'stock' }<br />    ]});<br /><br />db.grantRolesToUser('zeenea', 'zeeneaRole');</div><div id="wwp100354" class="Heading_2">Collected Metadata</div><div id="wwp100360" class="Heading_3">Inventory</div><div id="wwp100366" class="Paragraph">The inventory collects all databases and collections accessible by the user. </div><div id="wwp100372" class="Heading_2">Datasets</div><div id="wwp100378" class="Paragraph">Here, datasets are MongoDB collections.</div><ul id="wwl100441" class="UList"><li id="wwli100393" class="UList_Item" value="1"><div id="wwp100387" class="UList_Paragraph"><span class="Bold">Name</span>: collection name</div></li><li id="wwli100405" class="UList_Item" value="2"><div id="wwp100399" class="UList_Paragraph"><span class="Bold">Source Description</span>: not supported</div></li><li id="wwli100438" class="UList_Item" value="3"><div id="wwp100411" class="UList_Paragraph"><span class="Bold">Technical Data</span>:</div><ul id="wwl100435" class="UList"><li id="wwli100423" class="UList_Item" value="1"><div id="wwp100417" class="UList_Paragraph">Database: Database name</div></li><li id="wwli100432" class="UList_Item" value="2"><div id="wwp100426" class="UList_Paragraph">Collection: Collection name</div></li></ul></li></ul><div id="wwp100444" class="Heading_3">Field</div><div id="wwp100450" class="Paragraph">Table fields. </div><ul id="wwl100561" class="UList"><li id="wwli100468" class="UList_Item" value="1"><div id="wwp100462" class="UList_Paragraph"><span class="Bold">Name</span>: Field path in the JSON file, where items are separated by a period (e.g., <span class="Code">client.name</span>)</div></li><li id="wwli100480" class="UList_Item" value="2"><div id="wwp100474" class="UList_Paragraph"><span class="Bold">Source Description</span>: Not supported</div></li><li id="wwli100495" class="UList_Item" value="3"><div id="wwp100489" class="UList_Paragraph"><span class="Bold">Native type</span>: Field native type. If there are more than one native types, they are separated with a pipe (<span class="Code">|</span>).</div></li><li id="wwli100510" class="UList_Item" value="4"><div id="wwp100504" class="UList_Paragraph"><span class="Bold">Nullable</span>: constant, <span class="Code">TRUE</span></div></li><li id="wwli100525" class="UList_Item" value="5"><div id="wwp100519" class="UList_Paragraph"><span class="Bold">Multivalued</span>: <span class="Code">TRUE</span> if the field contains a list</div></li><li id="wwli100558" class="UList_Item" value="6"><div id="wwp100531" class="UList_Paragraph"><span class="Bold">Technical Data</span>:</div><ul id="wwl100555" class="UList"><li id="wwli100543" class="UList_Item" value="1"><div id="wwp100537" class="UList_Paragraph">Technical Name: Field technical name</div></li><li id="wwli100552" class="UList_Item" value="2"><div id="wwp100546" class="UList_Paragraph">Native type: Field native type</div></li></ul></li></ul><div id="wwp100564" class="Heading_2">Object Identification Keys</div><div id="wwp100570" class="Paragraph">An identification key is associated with each object in the catalog. In the case of the object being created by a connector, the connector builds it.</div><div id="wwp100576" class="Paragraph">More information about unique identification keys in this documentation: Identification Keys.</div><div id="wwp100582" class="HTML"> <table>
   <tr><th>Object</th><th>Identification Key</th><th>Description</th></tr>
   <tr>
     <td>Dataset</td>
     <td>code/database name/dataset name</td>
     <td>
       <ul>
         <li>**code**: Unique identifier of the connection noted in the configuration file</li>
         <li>**database name**</li>
         <li>**dataset name**</li>
       </ul>
     </td>
   </tr>
   <tr>
     <td>Field</td>
     <td>code/database name/dataset name/field name</td>
     <td>
       <ul>
         <li>**code**:  Unique identifier of the connection noted in the configuration file</li>
         <li>**database name**</li>
         <li>**dataset name**</li>
         <li>**field name**</li>
       </ul>
     </td>
   </tr>
 </table></div></div><div id="page_dates"><div class="ww_skin_document_last_modified_date">Last modified date: 03/19/2025</div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script></body></html>