<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Creating a Docker Image for your Scanner</title><link rel="Prev" href="zeenea-scanner-setup.html" title="Previous" /><link rel="Next" href="zeenea-filters.html" title="Next" /><link rel="StyleSheet" href="../css/font-awesome/css/all.min.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/zeenea-scanner-docker.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/webworks.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="../css/print.css" type="text/css" media="print" /><noscript><div id="noscript_padding"></div></noscript></head><body id="pN_002b09QB7dnigZcKNYN1eqztA" class="ww_skin_page_body" style="visibility: hidden;"><input type="hidden" id="page_onload_url" value="../index.html#page/Technical%20Documentation/zeenea-scanner-docker.html"></input><span id="dropdown_ids" style="display:none;"></span><div id="ww_content_container"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><a class="WebWorks_Breadcrumb_Link" href="scanners.html">Technical Documentation</a> : <a class="WebWorks_Breadcrumb_Link" href="scanners.html#p100003">Scanners</a> : <span class="WebWorks_Breadcrumb_Text">Creating a Docker Image for your Scanner</span></div><div class="ww_skin_page_toolbar"><div id="dropdown_button_container" class="dropdown_container dropdown_button_container_disabled"><a id="show_hide_all" class="ww_skin ww_behavior_dropdown_toggle ww_skin_dropdown_toggle" title="Page DropDown Toggle" href="#"><i class="far"></i></a><span class="ww_skin_page_toolbar_divider">&nbsp;</span></div><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#"><i class="fa"></i></a></div><!-- was this helpful button --><!--                         --><div class="ww_skin_was_this_helpful_container"><div class="ww_skin_was_this_helpful_message">Was this helpful?</div><div class="ww_skin_was_this_helpful_buttons_container"><div id="helpful_thumbs_up" class="ww_skin_was_this_helpful_button" title="Helpful"><i class="far"></i></div><div id="helpful_thumbs_down" class="ww_skin_was_this_helpful_button" title="Unhelpful"><i class="far"></i></div></div></div></header><div id="page_content_container"><div id="page_content"><div id="wwp100003" class="Heading_1">Creating a Docker Image for your Scanner</div><div id="wwb100018" class="Blockquote"><div id="wwp100012" class="Blockquote_Paragraph"><span class="Bold">Disclaimer:</span> This Docker documentation is provided as an example. Adapt it to your context, following the online documentation about how to run a Zeenea Scanner.</div></div><div id="wwp100021" class="Heading_2">Introduction</div><div id="wwp100027" class="Paragraph">Zeenea doesn’t provide an official Scanner image, but it’s rather easy to build your own.</div><div id="wwp100033" class="Paragraph">This article shares all the necessary information you need to define your own image.</div><div id="wwp100039" class="Paragraph">As it is an example, feel free to adapt this recommendation to your context.</div><div id="wwp100045" class="Heading_2">Dockerfile example</div><div id="wwp100051" class="Paragraph">Here is a simple Dockerfile example:</div><div id="wwp100057" class="Code_Fence">FROM alpine:3<br /><br />RUN     apk add --no-cache bash<br />RUN     apk add openjdk11<br /><br />ARG     ZEENEA_VERSION<br /><br />WORKDIR /opt<br /><br />ARG     PACKAGE_FILE="zeenea-scanner-${ZEENEA_VERSION}.tar.gz"<br /><br />COPY    "docker/${PACKAGE_FILE}" "${PACKAGE_FILE}"<br /><br />RUN     tar xf "${PACKAGE_FILE}" &amp;&amp; rm "${PACKAGE_FILE}" &amp;&amp; mv zeenea-scanner-${ZEENEA_VERSION} zeenea-scanner<br /><br />COPY    "docker/application.conf" "zeenea-scanner/conf/application.conf"<br />ADD     "connections/" "zeenea-scanner/connections"<br /><br />COPY    "docker/entrypoint.sh" "/opt/entrypoint.sh"<br />ENTRYPOINT  ["/opt/entrypoint.sh"]<br />CMD ["start"]</div><div id="wwp100063" class="Paragraph">Zeenea Scanner requires Java 11 to run — the image is based on Openjdk JRE 11 Slim.</div><div id="wwp100069" class="Paragraph">It creates a user, having only the expected privileges, as described in our Scanner documentation. You can give him a Group and User ID to ease the administration out of the container, but that’s not mandatory at all.</div><div id="wwp100075" class="Heading_2">Get the binary</div><div id="wwp100084" class="Paragraph">First, let’s create a fresh new folder, named, for instance, <span class="Code">zeenea-docker</span>.</div><div id="wwp100090" class="Paragraph">Download (or get from our support) the Zeenea Scanner you want to dockerize.</div><div id="wwp100105" class="Paragraph">Unzip the archive into <span class="Code">zeenea-docker</span> and rename the scanner folder <span class="Code">zeenea-scanner-latest</span> (instead of <span class="Code">zeenea-scanner-VERSION</span>)</div><div id="wwp100111" class="Heading_2">Build your image</div><div id="wwp100117" class="Paragraph">Before building, you’ll need a startup script you image will use to run the Scanner process.</div><div id="wwp100126" class="Paragraph">Here is an example of such a file. Save it as <span class="Code">entrypoint.sh</span>:</div><div id="wwp100132" class="Code_Fence">#!/usr/bin/env bash<br /><br /><br />function main() {<br />    find_scanner_home<br /><br />    local cmd="$1"<br />    if is_command "$cmd"; then<br />        shift<br />#        set -x<br />        "$cmd" "$@"<br />    else<br />        echo "Invalid command $cmd"<br />    fi<br />}<br /><br />function is_command() {<br />    if [[ "$(type -t $1)" == 'function' ]]; then<br />        return 0<br />    else<br />        return 1<br />    fi<br />}<br /><br />function find_scanner_home() {<br />    if [ "$(uname -s | cut -c1-5)" = "Linux" ]; then<br />        SCRIPT=$(readlink -f "$0")<br />        SCRIPTPATH=$(dirname "$SCRIPT")<br />    elif [ "$(uname)" = "Darwin" ]; then<br />        SCRIPTPATH="$(cd "$(dirname "$0")" &amp;&amp; pwd -P)"<br />    else<br />        exit<br />    fi<br /><br />    SCANNER_HOME="$(cd "zeenea-scanner" &amp;&amp; pwd -P)"<br />    echo "Scanner Root: $SCANNER_HOME"<br />}<br /><br />function start() {<br />  if [ -n "$1" ]; then<br />    cd $SCANNER_HOME &amp;&amp; ./bin/zeenea-scanner -Dconfig.file="$1"<br />  else<br />    cd $SCANNER_HOME &amp;&amp; ./bin/zeenea-scanner<br />  fi<br />}<br /><br />main "$@"</div><div id="wwp100144" class="Paragraph">Copy your Dockerfile and <span class="Code">entrypoint.sh</span>, based on the examples above, into <span class="Code">zeenea-docker</span>.</div><div id="wwp100150" class="Paragraph">Then, build your own Docker image:</div><div id="wwp100159" class="Paragraph"><span class="Code">docker build -t zeenea-scanner:latest</span></div><div id="wwp100165" class="Heading_2">Prepare your Scanner configuration</div><ol id="wwl100261" class="OList"><li id="wwli100186" class="OList_Item" value="1"><div id="wwp100171" class="OList_Paragraph">Create four folders wherever you want:</div><div id="wwp100180" class="OList_Paragraph"><span class="Code">mkdir -p {conf,connections,plugins,logs}</span></div></li><li id="wwli100204" class="OList_Item" value="2"><div id="wwp100198" class="OList_Paragraph">Copy the file <span class="Code">application.conf.template</span> from the previously downloaded scanner into the <span class="Code">conf</span> folder with <span class="Code">application.conf</span> as its new name.</div></li><li id="wwli100219" class="OList_Item" value="3"><div id="wwp100213" class="OList_Paragraph">Modify <span class="Code">application.conf</span> as needed. See <span class="Link"><a href="../Features%20_%20Applications/zeenea-managing-scanners.html#" title="Managing Scanners">Managing Scanners</a></span>.</div></li><li id="wwli100234" class="OList_Item" value="4"><div id="wwp100228" class="OList_Paragraph">Copy <span class="Code">log4.xml</span> file into the <span class="Code">conf</span> folder.</div></li><li id="wwli100243" class="OList_Item" value="5"><div id="wwp100237" class="OList_Paragraph">Modify its content if necessary.</div></li><li id="wwli100258" class="OList_Item" value="6"><div id="wwp100252" class="OList_Paragraph">Drop your plugins into the <span class="Code">plugins</span> folder and configure your connections in the <span class="Code">connections</span> folder.</div></li></ol><div id="wwp100264" class="Paragraph">As you may have multiple scanners, each will have its own name.</div><div id="wwp100270" class="Paragraph">This name is very important as it determines which scanner handles which connection.</div><div id="wwp100276" class="Paragraph">This name will be provided as an env variable to the container (see below).</div><div id="wwp100282" class="Heading_2">Run your Dockerized Zeenea Scanner</div><div id="wwp100291" class="Paragraph">Considering your four folders were created locally under <span class="Code">/opt/zee</span>, the startup script may be as follows:</div><div id="wwp100297" class="Code_Fence">SCANNER_NAME=myscanner-identifier &amp;&amp;<br />docker run \<br /> -d \<br /> -h $SCANNER_NAME \<br /> --name $SCANNER_NAME \<br /> -v /opt/zee/conf:/opt/zeenea-scanner/conf:rw \<br /> -v /opt/zee/connections:/opt/zeenea-scanner/connections:rw \<br /> -v /opt/zee/plugins:/opt/zeenea-scanner/plugins:rw \<br /> -v /opt/zee/logs:/opt/zeenea-scanner/logs:rw \<br /> -e SCANNER_IDENTIFIER=$SCANNER_NAME \<br /> -e JAVA_XMX=4g \<br /> --restart unless-stopped \<br /> zeenea-scanner:latest</div><div id="wwp100303" class="Paragraph">Your container will share the name by which Zeenea platform knows it.</div><div id="wwp100312" class="Paragraph">Choose a unique name and set the <span class="Code">SCANNER_NAME</span> env variable.</div><div id="wwp100318" class="Paragraph">If you upgrade or have to destroy and recreate the container, stick with the name initially chosen so that the platform will consider the new running scanner as the one previously registered.</div></div><div id="page_dates"><div class="ww_skin_document_last_modified_date">Last modified date: 06/11/2025</div></div><!-- Related Topics --><!--                --><footer><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div></div><br /></footer></div></div><input type="hidden" id="preserve_unknown_file_links" value="false"></input><noscript><div id="noscript_warning">This site works best with JavaScript enabled</div></noscript><script type="text/javascript" src="../scripts/common.js"></script><script type="text/javascript" src="../scripts/page.js"></script></body></html>